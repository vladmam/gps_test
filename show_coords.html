<!DOCTYPE html>
<html>
    <head>
        <title>Примеры. Метка</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script type="text/javascript">

var mode, watch;
function on_position (position) {
    'use strict';
    alert(mode + ' ' + position.coords.latitude + ' ' + position.coords.longitude);
}
if (navigator.geolocation) {
    mode = 'High accuracy AGPS';
    watch = navigator.geolocation.getCurrentPosition(
        on_position,
        function (error) {
            mode = 'Low accuracy APGS';
            watch = navigator.geolocation.watchPosition(
                self.on_position,
                function (error) {
                    mode = 'No geolocation';
                    alert(mode);
                },
                {
                    enableHighAccuracy: false,
                    timeout: 30000
                }
            );
        },
        {
            enableHighAccuracy: true,
            timeout: 30000
        }
    );
} else {
    alert('No geolocation');
}
        </script>
    </head>
</html>
